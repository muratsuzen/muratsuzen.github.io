<!DOCTYPE html><html lang="en" data-mode="dark" ><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Murat Süzen" /><meta property="og:locale" content="tr_TR" /><meta name="description" content=".Net Core, Angular, T-SQL, ASP.NET Core, Typescript" /><meta property="og:description" content=".Net Core, Angular, T-SQL, ASP.NET Core, Typescript" /><link rel="canonical" href="https://muratsuzen.github.io/" /><meta property="og:url" content="https://muratsuzen.github.io/" /><meta property="og:site_name" content="Murat Süzen" /><meta property="og:type" content="website" /><link rel="next" href="https://muratsuzen.github.io/page2" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Murat Süzen" /><meta name="twitter:site" content="@muratsuezen" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebSite","description":".Net Core, Angular, T-SQL, ASP.NET Core, Typescript","headline":"Murat Süzen","name":"Murat Süzen","sameAs":["https://twitter.com/muratsuezen","https://github.com/muratsuzen"],"url":"https://muratsuzen.github.io/"}</script><title>Murat Süzen</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Murat Süzen"><meta name="application-name" content="Murat Süzen"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8591605056982916" crossorigin="anonymous"></script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://muratsuzen.github.io/assets/img/logo.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Murat Suzen</a></div><div class="site-subtitle font-italic">software developer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/muratsuzen" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/muratsuezen" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/muratsuzen/" aria-label="linkedin" target="_blank" rel="noopener noreferrer"> <i class="fab fa-linkedin"></i> </a> <a href="https://muratsuzen.medium.com/" aria-label="medium" target="_blank" rel="noopener noreferrer"> <i class="fab fa-medium"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>.NET Core ile Repository Pattern Kullanımı</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>.NET Core ile Repository Pattern Kullanımı</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1637944380" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Nov 26, 2021 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href=""></a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2201 words"> <em>12 min</em> read</span></div></div></div><div class="post-content"><p>Uygulama geliştirirken kullanıcıdan veri alır yada kullanıcıya veriler listeleriz. Bu verileri alırken yada listelerken herhangi bir veritabanından (ekleme,silme,güncelleme,listeleme) <code class="language-plaintext highlighter-rouge">CRUD</code> işlemleri yapıyoruz. Bu makalede .NET Core ile veritabanı işlemlerinde Repository Pattern yaklaşımını anlatmaya çalışacağım.</p><h2 id="repository-pattern-nedir"><span class="mr-2">Repository Pattern Nedir?</span><a href="#repository-pattern-nedir" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Veritabanı işlemleri için yazdığımız kod bloklarının tekrar kullanımını sağlayan bir yaklaşımdır. Veritabanı işlemleri için sürekli farklı kodlar yazmaktansa, Repsitory Pattern yaklaşımı ile tekrar kullanabileceğimiz kod blokları sayesinde karmaşıklıktan kurtulup yönetilebilir bir yapı oluşturabiliriz. Örnek bir proje oluşturup yaklaşımı inceleyelim.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>dotnet new sln
</pre></table></code></div></div><p>Yeni bir solution oluşturduktan sonra Core, Entities, DataAccess,Business katmanlarını ve WebAPI projesini oluşturacağım.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>dotnet new classlib <span class="nt">-o</span> reppat.Core
dotnet new classlib <span class="nt">-o</span> reppat.Entities
dotnet new classlib <span class="nt">-o</span> reppat.DataAccess
dotnet new classlib <span class="nt">-o</span> reppat.Business
dotnet new webapp <span class="nt">-o</span> reppat.WebAPI
</pre></table></code></div></div><h3 id="core-katmanı"><span class="mr-2">Core Katmanı</span><a href="#core-katmanı" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Tüm katmanlarda kullanılabilecek Extensions, Interfaces, Aspects vb yapıları içermektedir.</p><h3 id="entities-katmanı"><span class="mr-2">Entities Katmanı</span><a href="#entities-katmanı" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Veri modellerinin (Entity,Dtos vb) içerdiği katmandır.</p><h3 id="dataaccess-katmanı"><span class="mr-2">DataAccess Katmanı</span><a href="#dataaccess-katmanı" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Veri sağlayıcıları ile (SQL, MongoDb vb.) bağlantı kurabileceğimiz katmandır.</p><h3 id="business-katmanı"><span class="mr-2">Business Katmanı</span><a href="#business-katmanı" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Veri katmanı ve proje arayüzü arasındaki köprü olan iş katmanıdır.</p><p>Projeyi ve katmanları Solution’a ekleyelim.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>dotnet sln add reppat.WebAPI/reppat.WebAPI.csproj
dotnet sln add reppat.Core/reppat.Core.csproj
dotnet sln add reppat.Entities/reppat.Entities.csproj
dotnet sln add reppat.DataAccess/reppat.DataAccess.csproj
dotnet sln add reppat.Business/reppat.Business.csproj
</pre></table></code></div></div><p>Proje ve katmanların referanslarını ekleyelim.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>dotnet add reppat.Entities/reppat.Entities.csproj reference reppat.Core/reppat.Core.csproj

dotnet add reppat.DataAccess/reppat.DataAccess.csproj reference reppat.Core/reppat.Core.csproj
dotnet add reppat.DataAccess/reppat.DataAccess.csproj reference reppat.Entities/reppat.Entities.csproj

dotnet add reppat.Business/reppat.Business.csproj reference reppat.DataAccess/reppat.DataAccess.csproj

dotnet add reppat.WebAPI/reppat.WebAPI.csproj reference reppat.Core/reppat.Core.csproj
dotnet add reppat.WebAPI/reppat.WebAPI.csproj reference reppat.Entities/reppat.Entities.csproj
dotnet add reppat.WebAPI/reppat.WebAPI.csproj reference reppat.Business/reppat.Business.csproj
</pre></table></code></div></div><p>Referans eklemeleri tamamlandıktan sonra aşağıdaki gibi bir klasör ve ilişki yapısı olacaktır.</p><p><a href="/assets/img/posts/reppat-solution.jpg" class="popup img-link "><img data-src="/assets/img/posts/reppat-solution.jpg" alt="Reppat Solution" class="lazyload" data-proofer-ignore></a> <em>Reppat Solution</em></p><p>Proje sınıflarımızı oluşturduğumuza göre öncelikle Core katmanı ile başlayalım. Entities klasörü ve içerisine <code class="language-plaintext highlighter-rouge">IEntity.cs</code> isminde interface ekliyorum. IEntity sınıfının amacı birazdan geliştirmesini yapacağımız Repository Pattern prensibi için veri sınıflarını filtrelemektir.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">namespace</span> <span class="nn">reppat.Core.Entities</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">interface</span> <span class="nc">IEntity</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>IEntity interface’inin eklenmesinden sonra yine Core katmanına DataAccess klasörü ve içerisine <code class="language-plaintext highlighter-rouge">IBaseEntityRepository</code> isminde bir interface ekliyorum. Bu interface Repository Pattern yapısının temelini oluşturmaktadır.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">reppat.Core.Entities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq.Expressions</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">reppat.Core.DataAccess</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">interface</span> <span class="nc">IBaseEntityRepository</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="k">where</span> <span class="n">T</span> <span class="p">:</span> <span class="k">class</span><span class="err">,</span> <span class="nc">IEntity</span><span class="p">,</span> <span class="k">new</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">T</span> <span class="nf">Get</span><span class="p">(</span><span class="n">Expression</span><span class="p">&lt;</span><span class="n">Func</span><span class="p">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="kt">bool</span><span class="p">&gt;&gt;</span> <span class="n">filter</span><span class="p">);</span>
        <span class="n">List</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="nf">GetList</span><span class="p">(</span><span class="n">Expression</span><span class="p">&lt;</span><span class="n">Func</span><span class="p">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="kt">bool</span><span class="p">&gt;&gt;</span> <span class="n">filter</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>
        <span class="n">T</span> <span class="nf">Add</span><span class="p">(</span><span class="n">T</span> <span class="n">entity</span><span class="p">);</span>
        <span class="n">T</span> <span class="nf">Update</span><span class="p">(</span><span class="n">T</span> <span class="n">entity</span><span class="p">);</span>
        <span class="k">void</span> <span class="nf">Delete</span><span class="p">(</span><span class="n">T</span> <span class="n">entity</span><span class="p">);</span>
        <span class="k">void</span> <span class="nf">AddRange</span><span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">entities</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Yukarıdaki kod bloğunu inceleyelim. IBaseEntityRepository’den türeyebilecek (implement edilebilecek) sınıflar için bir where koşulu bulunmaktadır. Bu where koşulu görüldüğü gibi T objesinin bir class ve new() yani instance alınabilecek bir sınıf olması gerekmektedir. Ayrıca daha önceki kod bloğunda tanımladığımız IEntity interface’inden türeyen sınıfları içermesi gerekmektedir. Bu şekilde bir sınıfın filtrelenmesi sağlamaktadır. Metodları incelediğimizde bir Expression filtresi görüyoruz. Bu filteler ile veritabanından tüm veri getirilmeden önce bir filtre gönderilerek sadece istenilen bilgilerin listelenmesi sağlanmaktadır.</p><p>Veritabanı işlemlerini genellikle ORM (Entity Framework, Hibernate vb.) araçları ile yapıyoruz. Kullandığımız ORM aracına göre Core katmanında klasör oluşturuyorum. Ben EntityFramework isminde bir klasör oluşturup içerisine EfBaseEntityRepository isminde bir sınıf ekliyorum. EfBaseEntityRepository sınıfını IBaseEntityRepository interface’den türetiyoruz. Core katmanına nuget paket yönetimi ile <code class="language-plaintext highlighter-rouge">Microsoft.EntityFrameworkCore</code> paketini ekliyorum.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>Install-Package Microsoft.EntityFrameworkCore <span class="nt">-Version</span> 6.0.0
</pre></table></code></div></div><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">Microsoft.EntityFrameworkCore</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">reppat.Core.Entities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq.Expressions</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">reppat.Core.DataAccess.EntityFramework</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">EfBaseEntityRepository</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">,</span> <span class="n">TContext</span><span class="p">&gt;</span> <span class="p">:</span> <span class="n">IBaseEntityRepository</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">&gt;</span>
    <span class="k">where</span> <span class="n">TEntity</span> <span class="p">:</span> <span class="k">class</span><span class="err">,</span> <span class="nc">IEntity</span><span class="p">,</span> <span class="k">new</span><span class="p">()</span>
    <span class="k">where</span> <span class="n">TContext</span> <span class="p">:</span> <span class="n">DbContext</span><span class="p">,</span> <span class="k">new</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">TEntity</span> <span class="nf">Add</span><span class="p">(</span><span class="n">TEntity</span> <span class="n">entity</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotImplementedException</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">AddRange</span><span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">&gt;</span> <span class="n">entities</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotImplementedException</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">Delete</span><span class="p">(</span><span class="n">TEntity</span> <span class="n">entity</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotImplementedException</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">TEntity</span> <span class="nf">Get</span><span class="p">(</span><span class="n">Expression</span><span class="p">&lt;</span><span class="n">Func</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">,</span> <span class="kt">bool</span><span class="p">&gt;&gt;</span> <span class="n">filter</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotImplementedException</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">&gt;</span> <span class="nf">GetList</span><span class="p">(</span><span class="n">Expression</span><span class="p">&lt;</span><span class="n">Func</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">,</span> <span class="kt">bool</span><span class="p">&gt;&gt;</span> <span class="n">filter</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotImplementedException</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">TEntity</span> <span class="nf">Update</span><span class="p">(</span><span class="n">TEntity</span> <span class="n">entity</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotImplementedException</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Yukarıdaki kod bloğunu inceleyelim. Görüdüğü gibi TEntity ve TContext isimlerinde iki parametre alan bir sınıf oluşturduk. <code class="language-plaintext highlighter-rouge">TEntity</code> parametresi IEntity interface’inden türetilen ve instance alınabilecek sınıf tipinde olacağını where koşulu ile anlayabiliyoruz. TContext isimli parametresinin instance alınabilen ve Entity Framework ORM aracının veritabanı işlemlerini yapılandırabildiğimiz <code class="language-plaintext highlighter-rouge">DbContext</code> tipinde olacağını görüyoruz. Parametreleri inceledeğimize göre metodları geliştirme işlemine geçebiliriz.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="n">TEntity</span> <span class="nf">Get</span><span class="p">(</span><span class="n">Expression</span><span class="p">&lt;</span><span class="n">Func</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">,</span> <span class="kt">bool</span><span class="p">&gt;&gt;</span> <span class="n">filter</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">context</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TContext</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">context</span><span class="p">.</span><span class="n">Set</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">&gt;().</span><span class="nf">SingleOrDefault</span><span class="p">(</span><span class="n">filter</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></table></code></div></div><p>Parametre olarak gönderilen TEntity, sınıfın where koşulundan geçtiğine göre artık bu sınıfn bir DbContext içerisindeki DbSet ile tanımlanan entity olduğunu biliyoruz. Böylece using bloğunda context isminde aldığım instance ile, DbContext’in Set metoduna TEntity’i tanıtıp SingleOrDefault yada FirstOrDefault metodları ile parametreden gelen Expression filtresini veriyorum. Get metodu gönderdiğimiz filtreye uygun olarak kayıtlarımızı geri döndürecektir.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">&gt;</span> <span class="nf">GetList</span><span class="p">(</span><span class="n">Expression</span><span class="p">&lt;</span><span class="n">Func</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">,</span> <span class="kt">bool</span><span class="p">&gt;&gt;</span> <span class="n">filter</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">context</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TContext</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">filter</span> <span class="p">==</span> <span class="k">null</span> <span class="p">?</span> <span class="n">context</span><span class="p">.</span><span class="n">Set</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">&gt;().</span><span class="nf">ToList</span><span class="p">()</span> <span class="p">:</span> <span class="n">context</span><span class="p">.</span><span class="n">Set</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">&gt;().</span><span class="nf">Where</span><span class="p">(</span><span class="n">filter</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></table></code></div></div><p>Get metodunda olduğu gibi GetList metodunda da aynı işlemleri yapıyorum. Burada farklı olarak filter parametresi eğer gönderilmezse ve null ise ToList() metodu ile tüm listeyi geri döndürüyorum.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="n">TEntity</span> <span class="nf">Add</span><span class="p">(</span><span class="n">TEntity</span> <span class="n">entity</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">context</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TContext</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">addedEntity</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="nf">Entry</span><span class="p">(</span><span class="n">entity</span><span class="p">);</span>
            <span class="n">addedEntity</span><span class="p">.</span><span class="n">State</span> <span class="p">=</span> <span class="n">EntityState</span><span class="p">.</span><span class="n">Added</span><span class="p">;</span>
            <span class="n">context</span><span class="p">.</span><span class="nf">SaveChanges</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">entity</span><span class="p">;</span>
    <span class="p">}</span>
</pre></table></code></div></div><p>Add metodunda yaptığım işlem parametre olarak gönderilen TEntity tipindeki entity objesini Context’in Entry metodu ile DbContext’e eklenmesini sağlıyorum ve State = EntityState.Added tanımı ile yeni kayıt ekleneceğini iletiyorum. Daha sonra context.SaveChanges(); metodu ile kayıt işlemini tamamlamış oluyoruz.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="n">TEntity</span> <span class="nf">Update</span><span class="p">(</span><span class="n">TEntity</span> <span class="n">entity</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">context</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TContext</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">updatedEntity</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="nf">Entry</span><span class="p">(</span><span class="n">entity</span><span class="p">);</span>
            <span class="n">updatedEntity</span><span class="p">.</span><span class="n">State</span> <span class="p">=</span> <span class="n">EntityState</span><span class="p">.</span><span class="n">Modified</span><span class="p">;</span>
            <span class="n">context</span><span class="p">.</span><span class="nf">SaveChanges</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">entity</span><span class="p">;</span>
    <span class="p">}</span>
</pre></table></code></div></div><p>Update metodunda Add işlemlerinin aynısını yapıyorum. Fakat buradaki farklı olan kısım görüldüğü üzere State = EntityState.Modified tanımı. Bu tanım ile DbContext’e gönderilen objenin yani veritabanı tablosunun güncelleneceğini iletiyorum. Burada kısa bir bilgiyle Entry ve Attach farkına değinmek istiyorum. Attach metodu ile gönderilen veritabanı tablo objesinin sadece değişen alanların güncellenmesi sağlanır. Ancak Entry metodu tam tersine gönderilen objenin tüm alanlarını güncelleme işlemi isteğidir. SaveChanges() ile işlem yapılmış olur. Siz uygulamanızın performans yapılandırmasına göre farklı tercih edebilirsiniz.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">void</span> <span class="nf">Delete</span><span class="p">(</span><span class="n">TEntity</span> <span class="n">entity</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">context</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TContext</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">deletedEntity</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="nf">Entry</span><span class="p">(</span><span class="n">entity</span><span class="p">);</span>
            <span class="n">deletedEntity</span><span class="p">.</span><span class="n">State</span> <span class="p">=</span> <span class="n">EntityState</span><span class="p">.</span><span class="n">Deleted</span><span class="p">;</span>
            <span class="n">context</span><span class="p">.</span><span class="nf">SaveChanges</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></table></code></div></div><p>Delete metodunda gönderilen entity State = EntityState.Deleted tanımı ile silinecek olarak işaretlenip SaveChanges() metodu ile silme işlemi tamamlanıyor.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">void</span> <span class="nf">AddRange</span><span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">&gt;</span> <span class="n">entities</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">context</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TContext</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">transaction</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">Database</span><span class="p">.</span><span class="nf">BeginTransaction</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="k">try</span>
                <span class="p">{</span>
                    <span class="k">foreach</span> <span class="p">(</span><span class="n">TEntity</span> <span class="n">entity</span> <span class="k">in</span> <span class="n">entities</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="kt">var</span> <span class="n">addedEntity</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="nf">Entry</span><span class="p">(</span><span class="n">entity</span><span class="p">);</span>
                        <span class="n">addedEntity</span><span class="p">.</span><span class="n">State</span> <span class="p">=</span> <span class="n">EntityState</span><span class="p">.</span><span class="n">Added</span><span class="p">;</span>
                    <span class="p">}</span>

                    <span class="n">context</span><span class="p">.</span><span class="nf">SaveChanges</span><span class="p">();</span>

                <span class="p">}</span>
                <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">transaction</span><span class="p">.</span><span class="nf">Rollback</span><span class="p">();</span>
                    <span class="k">throw</span> <span class="n">e</span><span class="p">.</span><span class="nf">GetBaseException</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="n">transaction</span><span class="p">.</span><span class="nf">Commit</span><span class="p">();</span>
            <span class="p">}</span>

        <span class="p">}</span>
    <span class="p">}</span>
</pre></table></code></div></div><p>AddRange metodunu üzerinde çalıştığım bir projede ihtiyaç dahilinde kullandığım için sizlerle paylaşmak istedim. Bu kod bloğu ile birden fazla TEntity parametresinin bir transaction bloğu açarak ekleme işemini yapıyorum. Herhangi bir adımda hata ile karşılaşdığında <code class="language-plaintext highlighter-rouge">transaction.Rollback()</code> metodu ile yapılan tüm işlemler geri alınmaktadır. Yazdığımız <code class="language-plaintext highlighter-rouge">EfBaseEntityRepository</code> sınıfı sayesinde Repository Pattern altyapısını belli ölçüde geliştirmiş olduk.</p><p>DataAccess katmanında veritabanı işlemlerini yapmak için geliştirmeye devam edelim. Interface ve bu interface’lerden türeyecek service sınıfları için DataAccess katmanına Abstract ve Concrete isimli iki klasör oluşturuyorum. Concrete klasörünün içerisine kullandığım ORM EntityFramework olduğu için EntityFramework isimli bir klasör oluşturup onunda içerisine Context isimli bir klasör ekliyorum. Context klasörüne reppatContext isminde bir sınıf ekliyorum. Bu sınıfı DbContext’ten türetip ilgili configuration ayarlarını ekliyorum.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>Install-Package Microsoft.EntityFrameworkCore.SqlServer <span class="nt">-Version</span> 6.0.0
Install-Package Microsoft.EntityFrameworkCore <span class="nt">-Version</span> 6.0.0
</pre></table></code></div></div><p>Microsoft.EntityFrameworkCore ve Microsoft.EntityFrameworkCore.SqlServer paketlerinin kurulumunu yapıyorum. OnConfiguring metodunu override yapıp veritabanı bağlantısını ekliyorum.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">Microsoft.EntityFrameworkCore</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">reppat.DataAccess.Concrete.EntityFramework.Contexts</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">ReppatContext</span> <span class="p">:</span> <span class="n">DbContext</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="nf">ReppatContext</span><span class="p">()</span>
        <span class="p">{</span>
            
        <span class="p">}</span>

        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnConfiguring</span><span class="p">(</span><span class="n">DbContextOptionsBuilder</span> <span class="n">optionsBuilder</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">optionsBuilder</span><span class="p">.</span><span class="nf">UseSqlServer</span><span class="p">(</span><span class="s">"Data Source=.;Initial Catalog=REPPAT;User ID=sa;Password=Pw123456"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Bağlantı ayarlarını eklediğimize göre Entities katmanında tablo yapılarını içeren sınıfları oluşturabiriz. Ben bir tablo ile örnek yapmak istiyorum. Bu nedenle Entities katmanına Concrete isminde bir klasör oluşturup Personal isimli bir sınıf ekliyorum. Bu örnek projenin personel kart bilgilerini içeren bir sınıf olacak.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">reppat.Core.Entities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">reppat.Entities.Concrete</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Personal</span> <span class="p">:</span> <span class="n">IEntity</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">PersonalId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">FirstName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">LastName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Personal sınıfını DbSet ile ReppatContext içerisine tanımlıyorum.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="n">DbSet</span><span class="p">&lt;</span><span class="n">Personal</span><span class="p">&gt;</span> <span class="n">Personals</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</pre></table></code></div></div><p>Migration ile veritabanı ve personal tablosunu oluşturalım. Migration oluşturmadan önce eklememiz gereken bir paket bulunmaktadır. DataAccess katmanına Microsoft.EntityFrameworkCore.Tool paketini ve WebAPI projemize Microsoft.EntityFrameworkCore.Design paketini ekliyorum.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>Install-Package Microsoft.EntityFrameworkCore.Tools <span class="nt">-Version</span> 6.0.0
Install-Package Microsoft.EntityFrameworkCore.Design <span class="nt">-Version</span> 6.0.0
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>Add-Migration initial
</pre></table></code></div></div><p>Yukarıdaki kod ile initial isminde bir migration sınıfı oluşturuluyor. <code class="language-plaintext highlighter-rouge">Update-Database</code> komutu ile veritabanı ve Personals tablosunu oluşturuyorum.</p><p><a href="/assets/img/posts/reppat_db.jpg" class="popup img-link "><img data-src="/assets/img/posts/reppat_db.jpg" alt="Reppat DB" class="lazyload" data-proofer-ignore></a> <em>Reppat DB</em></p><p>DataAccess katmanında Abstract klasöründe IPersonalDal isminde interface ekliyorum. IBaseEntityRepository interface’inden türetip parametre olarak istediğimiz IEntity tipindeki Personal sınıfını veriyorum.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">reppat.Core.DataAccess</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">reppat.Entities.Concrete</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">reppat.DataAccess.Abstract</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">interface</span> <span class="nc">IPersonalDal</span> <span class="p">:</span> <span class="n">IBaseEntityRepository</span><span class="p">&lt;</span><span class="n">Personal</span><span class="p">&gt;</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Daha sonra Concrete klasörüne EfPersonalDal isminde bir sınıf ekliyorum. EfBaseEntityRepository sınıfından türetip IEntity tipinde ve DbContext tipinde iki parametre istediğim için Personal ve ReppatContext sınıflarını gönderiyorum. Aynı zamanda IPersonalDal interface’inden türeyeceğini de belirityorum. Bu şekilde IPersonalDal interface’inin türetildiği interface IBaseEntityRepository ve EfPersonalDal sınıfının türediği interface IPersonalDal sayesinde IBaseEntityRepository olmaktadır. EfBaseEntityRepository referansı ile IBaseEntityRepository impelementini kullanacağını belirtmiş oluyorum. İşte bu şekilde bir kez yazdığımız EfBaseEntityRepository implementasyonu ile oluşturduğumuz sınıflarda tekrar tekrar kullanabiliyoruz.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">reppat.Core.DataAccess.EntityFramework</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">reppat.DataAccess.Abstract</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">reppat.DataAccess.Concrete.EntityFramework.Contexts</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">reppat.Entities.Concrete</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">reppat.DataAccess.Concrete.EntityFramework</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">EfPersonalDal</span> <span class="p">:</span> <span class="n">EfBaseEntityRepository</span><span class="p">&lt;</span><span class="n">Personal</span><span class="p">,</span><span class="n">ReppatContext</span><span class="p">&gt;,</span><span class="n">IPersonalDal</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>DataAccess katmanında veri sınıflarını oluşturduğumuza göre artık iş katmanını geliştirmeye geçebiliriz. Business katmanında Abstract ve Concrete klasörlerini ekliyorum. Abstract klasörüne IPersonalService isminde bir interface ekliyorum.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">reppat.Entities.Concrete</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">reppat.Business.Abstract</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">interface</span> <span class="nc">IPersonalService</span>
    <span class="p">{</span>
        <span class="n">Personal</span> <span class="nf">Get</span><span class="p">(</span><span class="kt">int</span> <span class="n">personalId</span><span class="p">);</span>
        <span class="n">List</span><span class="p">&lt;</span><span class="n">Personal</span><span class="p">&gt;</span> <span class="nf">GetList</span><span class="p">();</span>
        <span class="n">Personal</span> <span class="nf">Add</span><span class="p">(</span><span class="n">Personal</span> <span class="n">personal</span><span class="p">);</span>
        <span class="n">Personal</span> <span class="nf">Update</span><span class="p">(</span><span class="n">Personal</span> <span class="n">personal</span><span class="p">);</span>        
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>IPersonalService interface’ini ekledikten sonra Concrete klasörüne PersonalManager sınıfını ekliyorum.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">reppat.Business.Abstract</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">reppat.DataAccess.Abstract</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">reppat.Entities.Concrete</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">reppat.Business.Concrete</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">PersonalManager</span> <span class="p">:</span> <span class="n">IPersonalService</span>
    <span class="p">{</span>
        <span class="n">IPersonalDal</span> <span class="n">_personalDal</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">PersonalManager</span><span class="p">(</span><span class="n">IPersonalDal</span> <span class="n">personalDal</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_personalDal</span> <span class="p">=</span> <span class="n">personalDal</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">Personal</span> <span class="nf">Add</span><span class="p">(</span><span class="n">Personal</span> <span class="n">personal</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">_personalDal</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">personal</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">Personal</span> <span class="nf">Get</span><span class="p">(</span><span class="kt">int</span> <span class="n">personalId</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">_personalDal</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PersonalId</span> <span class="p">==</span> <span class="n">personalId</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Personal</span><span class="p">&gt;</span> <span class="nf">GetList</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">_personalDal</span><span class="p">.</span><span class="nf">GetList</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">Personal</span> <span class="nf">Update</span><span class="p">(</span><span class="n">Personal</span> <span class="n">personal</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">_personalDal</span><span class="p">.</span><span class="nf">Update</span><span class="p">(</span><span class="n">personal</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Yukarıdaki kod bloğunda görüldüğü üzere IPersonalDal interface’i constructor ile parametre olarak alıyorum. Ancak _personalDal’ın instanceini almadığımız için bu şekilde bir projede kullandığımızda hata alacağız. Bunun için Dependency Injection ile IPersonalDal istediğimizde EfPersonalDal sınıfını kullanılmasını sağlayacağız. WebAPI projemizi geliştirmeye başlayalım.</p><p>WebAPI projemizde Controller klasörüne PersonalController isminde bir API Controller ekliyorum ve içeriğini aşağıdaki gibi geliştiriyorum.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">Microsoft.AspNetCore.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.AspNetCore.Mvc</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">reppat.Business.Abstract</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">reppat.Entities.Concrete</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">reppat.WebAPI.Controllers</span>
<span class="p">{</span>
    <span class="p">[</span><span class="nf">Route</span><span class="p">(</span><span class="s">"[controller]"</span><span class="p">)]</span>
    <span class="p">[</span><span class="n">ApiController</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">PersonalController</span> <span class="p">:</span> <span class="n">ControllerBase</span>
    <span class="p">{</span>
        <span class="n">IPersonalService</span> <span class="n">_personalService</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">PersonalController</span><span class="p">(</span><span class="n">IPersonalService</span> <span class="n">personalService</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_personalService</span> <span class="p">=</span> <span class="n">personalService</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">HttpPost</span><span class="p">]</span>
        <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Add</span><span class="p">(</span><span class="n">Personal</span> <span class="n">personal</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">personal</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">personal</span><span class="p">));</span>

            <span class="k">try</span>
            <span class="p">{</span>
                <span class="n">_personalService</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">personal</span><span class="p">);</span>
                <span class="k">return</span> <span class="nf">Ok</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">exp</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="nf">BadRequest</span><span class="p">(</span><span class="n">exp</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span> 
            <span class="p">}</span>
            
        <span class="p">}</span>

        <span class="p">[</span><span class="n">HttpPut</span><span class="p">]</span>
        <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Update</span><span class="p">(</span><span class="n">Personal</span> <span class="n">personal</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">personal</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">personal</span><span class="p">));</span>

            <span class="k">try</span>
            <span class="p">{</span>
                <span class="n">_personalService</span><span class="p">.</span><span class="nf">Update</span><span class="p">(</span><span class="n">personal</span><span class="p">);</span>
                <span class="k">return</span> <span class="nf">Ok</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">exp</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="nf">BadRequest</span><span class="p">(</span><span class="n">exp</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
            <span class="p">}</span>

        <span class="p">}</span>

        <span class="p">[</span><span class="nf">HttpGet</span><span class="p">(</span><span class="s">"Get/{personalId}"</span><span class="p">)]</span>
        <span class="k">public</span> <span class="n">Personal</span> <span class="nf">Get</span><span class="p">(</span><span class="kt">int</span> <span class="n">personalId</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">_personalService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="n">personalId</span><span class="p">);</span>

        <span class="p">}</span>

        <span class="p">[</span><span class="n">HttpGet</span><span class="p">]</span>
        <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Personal</span><span class="p">&gt;</span> <span class="nf">GetList</span><span class="p">()</span>
        <span class="p">{</span>
           <span class="k">return</span> <span class="n">_personalService</span><span class="p">.</span><span class="nf">GetList</span><span class="p">();</span>

        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Bu şekilde projeyi çalıştırıp Swagger yardımıyla test yaptığımızda aşağıdaki hatayı alıyorum.</p><p><a href="/assets/img/posts/reppat_api_error.jpg" class="popup img-link "><img data-src="/assets/img/posts/reppat_api_error.jpg" alt="Reppat API ERROR" class="lazyload" data-proofer-ignore></a> <em>Reppat API ERROR</em></p><p>Bu hatayı daha önce belirttiğim gibi Dependency Injection ayarlarını yapmadığım için alıyorum. Program.cs içerisinde builder ile Singleton tanımını yapıyorum.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddSingleton</span><span class="p">&lt;</span><span class="n">IPersonalDal</span><span class="p">,</span> <span class="n">EfPersonalDal</span><span class="p">&gt;();</span>
<span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddSingleton</span><span class="p">&lt;</span><span class="n">IPersonalService</span><span class="p">,</span> <span class="n">PersonalManager</span><span class="p">&gt;();</span>
</pre></table></code></div></div><p>Tanımlamaları yaptıktan sonra projeyi çalıştırıp bir personel ekleme işlemini yapıyorum ve sıkıntısız bir şekilde sonuç alıyorum. Repository Pattern konusunu .NET Core ile incelemiş olduk. Makale biraz uzun olduğu için umarım sıkılmamışsınızdır. Uygulamayı <a href="https://github.com/muratsuzen/dotnetcore-samples/tree/main/reppat"><strong>buradan</strong></a> indirebilirsiniz. Bir sonraki makalede görüşmek üzere.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/asp-net-core/'>ASP.NET CORE</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/asp-net-core/" class="post-tag no-text-decoration" >asp.net core</a> <a href="/tags/web-api/" class="post-tag no-text-decoration" >web api</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=.NET%20Core%20ile%20Repository%20Pattern%20Kullan%C4%B1m%C4%B1%20-%20Murat%20Suzen&url=https%3A%2F%2Fmuratsuzen.github.io%2Fposts%2Fnet-core-ile-repository-pattern-kullanimi%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=.NET%20Core%20ile%20Repository%20Pattern%20Kullan%C4%B1m%C4%B1%20-%20Murat%20Suzen&u=https%3A%2F%2Fmuratsuzen.github.io%2Fposts%2Fnet-core-ile-repository-pattern-kullanimi%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fmuratsuzen.github.io%2Fposts%2Fnet-core-ile-repository-pattern-kullanimi%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/asp-net-core/">asp.net core</a> <a class="post-tag" href="/tags/web-api/">web api</a> <a class="post-tag" href="/tags/dotnet/">dotnet</a> <a class="post-tag" href="/tags/net-6-0/">net 6.0</a> <a class="post-tag" href="/tags/csharp/">csharp</a> <a class="post-tag" href="/tags/middleware/">middleware</a> <a class="post-tag" href="/tags/net-9/">.NET 9</a> <a class="post-tag" href="/tags/api-key/">api key</a> <a class="post-tag" href="/tags/aspnet-core/">aspnet core</a> <a class="post-tag" href="/tags/dependency-injection/">dependency injection</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/web-api-ve-angular-ile-blob-kullanimi/"><div class="card-body"> <em class="small" data-ts="1610296380" data-df="ll" > Jan 10, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Web API ve Angular 8 ile Blob Veri Tipi Kullanımı</h3><div class="text-muted small"><p> Yaptığım bir Angular projesinde Web API ile FTP server dan dosya indirme işlem yapmam gerekiyordu. Haliyle blob veri tipleriyle ilgilenmem gerekti. FTP den dosyaları indirme işlemi çok zamanımı alm...</p></div></div></a></div><div class="card"> <a href="/posts/hangfire-nedir-nasil-kullanilir/"><div class="card-body"> <em class="small" data-ts="1602347580" data-df="ll" > Oct 10, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Asp.NET Core Web API - Hangfire Kullanımı</h3><div class="text-muted small"><p> Hangfire Nedir? Hangfire, uygulamalarımızda arka planda çalıştırmak istediğimiz işleri ( background jobs) yönetebildiğimiz açık kaynaklı bir kütüphanedir. Peki neden böyle bir kütüphaneye gereksini...</p></div></div></a></div><div class="card"> <a href="/posts/asp-net-core-web-api-jwt-authentication-kullanimi/"><div class="card-body"> <em class="small" data-ts="1610296380" data-df="ll" > Jan 10, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>ASP.NET Core Web API - JWT Authentication Kullanımı</h3><div class="text-muted small"><p> Merhabalar bu makalede .Net Core 3.1 versiyonu ile bir Web API örnek projede JWT (JSON Web Token) kimlik doğrulama yapısını inceleyeceğim. Daha önceki Web API makalelerine buradan ulaşabilirsiniz. ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/internet-nasil-calisir-internet-agi-nedir/" class="btn btn-outline-primary" prompt="Older"><p>İnternet Nedir? Ne İşe Yarar? İnternet Nasıl Çalışır?</p></a> <a href="/posts/redis-nedir-ne-ise-yarar-nasil-kullanilir/" class="btn btn-outline-primary" prompt="Newer"><p>Redis Nedir? Ne İşe Yarar? Nasıl Kullanılır?</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "muratsuzen/muratsuzen.github.io", "data-repo-id": "R_kgDOHzYwFw", "data-category": "General", "data-category-id": "DIC_kwDOHzYwF84CQwaD", "data-mapping": "og:title", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "top", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/asp-net-core/">asp.net core</a> <a class="post-tag" href="/tags/web-api/">web api</a> <a class="post-tag" href="/tags/dotnet/">dotnet</a> <a class="post-tag" href="/tags/net-6-0/">net 6.0</a> <a class="post-tag" href="/tags/csharp/">csharp</a> <a class="post-tag" href="/tags/middleware/">middleware</a> <a class="post-tag" href="/tags/net-9/">.NET 9</a> <a class="post-tag" href="/tags/api-key/">api key</a> <a class="post-tag" href="/tags/aspnet-core/">aspnet core</a> <a class="post-tag" href="/tags/dependency-injection/">dependency injection</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/muratsuzen">Murat Suzen</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> (function () { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE ? "dark" : "default"); let config = {theme: expectedTheme}; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function () { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Create mermaid tag */ $("pre").has("code.language-mermaid").each(function () { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<pre class=\"mermaid\">${svgCode}</pre>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); })(); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { /* start/end delimiter pairs for in-line math */ inlineMath: [ ['$', '$'], ['\\(', '\\)'] ], /* start/end delimiter pairs for display math */ displayMath: [ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-B206HX7D04"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-B206HX7D04'); }); </script>
