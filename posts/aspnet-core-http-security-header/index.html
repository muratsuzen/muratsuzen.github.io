<!DOCTYPE html><html lang="en" data-mode="dark" ><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Murat Süzen" /><meta property="og:locale" content="tr_TR" /><meta name="description" content=".Net Core, Angular, T-SQL, ASP.NET Core, Typescript" /><meta property="og:description" content=".Net Core, Angular, T-SQL, ASP.NET Core, Typescript" /><link rel="canonical" href="https://muratsuzen.github.io/" /><meta property="og:url" content="https://muratsuzen.github.io/" /><meta property="og:site_name" content="Murat Süzen" /><meta property="og:type" content="website" /><link rel="next" href="https://muratsuzen.github.io/page2" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Murat Süzen" /><meta name="twitter:site" content="@muratsuezen" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebSite","description":".Net Core, Angular, T-SQL, ASP.NET Core, Typescript","headline":"Murat Süzen","name":"Murat Süzen","sameAs":["https://twitter.com/muratsuezen","https://github.com/muratsuzen"],"url":"https://muratsuzen.github.io/"}</script><title>Murat Süzen</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Murat Süzen"><meta name="application-name" content="Murat Süzen"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8591605056982916" crossorigin="anonymous"></script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://muratsuzen.github.io/assets/img/logo.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Murat Suzen</a></div><div class="site-subtitle font-italic">software developer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/muratsuzen" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/muratsuezen" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/muratsuzen/" aria-label="linkedin" target="_blank" rel="noopener noreferrer"> <i class="fab fa-linkedin"></i> </a> <a href="https://muratsuzen.medium.com/" aria-label="medium" target="_blank" rel="noopener noreferrer"> <i class="fab fa-medium"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>ASP.NET Core Http Security Header</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>ASP.NET Core Http Security Header</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1655310780" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 15, 2022 </em> </span><div class="mt-3 mb-3"> <a href="/assets/img/stocks/qingbao-meng.jpg" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3C/svg%3E" data-src="/assets/img/stocks/qingbao-meng.jpg" alt="Photo by Qingbao Meng on Unsplash" width="1200" height="630" class="lazyload" data-proofer-ignore></a><figcaption class="text-center pt-2 pb-2">Photo by Qingbao Meng on Unsplash</figcaption></div><div class="d-flex justify-content-between"> <span> By <em> <a href=""></a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="665 words"> <em>3 min</em> read</span></div></div></div><div class="post-content"><p>Http Security Header yapısının .NET Core üzerinde nasıl kullanıldığını örnek bir ASP.NET Core projesinde inceleyelim. Öncelikle boş bir web projesi oluşturuyorum.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>dotnet new web <span class="nt">-o</span> httpsecurityheader
</pre></table></code></div></div><p>Projeyi oluşturdurduktan sonra başlık güvenliklerini (security headers) inceleyelim.</p><h2 id="x-frame-options"><span class="mr-2">X-Frame-Options</span><a href="#x-frame-options" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>X-Frame-Options header seçeneği <code class="language-plaintext highlighter-rouge">Clickjacking</code> adı verilen web sayfanızı iframe yöntemiyle başka bir web sayfasında çağırıp işlem yapılmasını önlemek için kullanılmaktadır. Kullanılabilecek 3 ayarı bulunmaktadır.</p><ul><li><code class="language-plaintext highlighter-rouge">DENY:</code> Sayfanın bir iframe içerisinde çağrılmasını tamamen engellemektedir.<li><code class="language-plaintext highlighter-rouge">SAMEORIGIN:</code> Sayfanın domaini dışında bir iframe içerisinde çağrılmasını engellemektedir.<li><code class="language-plaintext highlighter-rouge">ALLOW-FROM uri:</code> Günümüzdeki browserlarda artık çalışmayan ancak belirli bir url den iframe içerisinde çağrılmasına izin vermektedir.</ul><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">app</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">next</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"X-Frame-Options"</span><span class="p">,</span><span class="s">"DENY"</span><span class="p">);</span>
    <span class="k">await</span> <span class="nf">next</span><span class="p">();</span>
<span class="p">});</span>
</pre></table></code></div></div><blockquote class="prompt-warning"><p>Buradaki bilgiye göre varsayılan olarak X-Frame-Options header bilgisi SAMEORIGIN olarak oluşturuluyor.</p></blockquote><p>X-Frame-Options header bilgisini kaldırmak için aşağıdaki gibi <code class="language-plaintext highlighter-rouge">AddAntiforgery</code> metodunda işlem yapılmaldır.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="nf">AddAntiforgery</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">x</span><span class="p">.</span><span class="n">SuppressXFrameOptionsHeader</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="p">});</span>
</pre></table></code></div></div><h2 id="strict-transport-security"><span class="mr-2">Strict-Transport-Security</span><a href="#strict-transport-security" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>İstemcinin yapmış olduğu HTTP isteklerini man-in-the-middle (MITM) saldırılarını engellemek için otomatik olarak HTTPS’e döndürmek için kullanılır. .NET Core projelerinde UseHsts middleware yapısı ile kullanılmaktadır.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">app</span><span class="p">.</span><span class="nf">UseHsts</span><span class="p">();</span>
</pre></table></code></div></div><blockquote><p>HSTS kullanımı tarayıcıların önbelleğe almalarından geliştirme (development) ortamlarında kullanılması önerilmemektedir.</p></blockquote><p>HSTS yapılandırması için AddHSTS metodunu kullanabiliriz.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="nf">AddHsts</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">x</span><span class="p">.</span><span class="n">Preload</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="n">x</span><span class="p">.</span><span class="n">IncludeSubDomains</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="n">x</span><span class="p">.</span><span class="n">MaxAge</span> <span class="p">=</span> <span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromDays</span><span class="p">(</span><span class="m">60</span><span class="p">);</span>
    <span class="n">x</span><span class="p">.</span><span class="n">ExcludedHosts</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"example.com"</span><span class="p">);</span>
    <span class="n">x</span><span class="p">.</span><span class="n">ExcludedHosts</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"www.example.com"</span><span class="p">);</span>
<span class="p">});</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">Preload:</code> Web sitenin ilk bağlantısında HSTS içeren web sitelerinin bulunduğu listenin yüklenmesiyle birlikte güvenli bağlantı kurulacağını tarayıcıya iletmek için varsayılan değeri “true” yapılmalı.<li><code class="language-plaintext highlighter-rouge">IncludeSubDomains:</code> Alt alan adları için geçerli olup/olmayacağını belirtmek için kullanılır.<li><code class="language-plaintext highlighter-rouge">MaxAge:</code> HSTS üst bilgisinin ne kadar süre geçerli olacağını ayarlar.<li><code class="language-plaintext highlighter-rouge">ExcludedHosts:</code> Üst bilgilerin geçersiz olacak adresler eklenir.</ul><p>Ayrıca istemcilerden gelen tüm HTTP isteklerini HTTPS adresine zorunlu yönlendirme işlemi için UseHttpsRedirection middleware kullanılmaktadır. Bu middleware kullanıldığında HTTPS yapılandırması olmasına dikkat edilmelidir.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">app</span><span class="p">.</span><span class="nf">UseHttpsRedirection</span><span class="p">();</span>
</pre></table></code></div></div><p>HttpsRedirection yapılandırması için AddHttpsRedirection metodunu kullanabiliriz.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="nf">AddHttpsRedirection</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">x</span><span class="p">.</span><span class="n">HttpsPort</span> <span class="p">=</span> <span class="m">7047</span><span class="p">;</span>
    <span class="n">x</span><span class="p">.</span><span class="n">RedirectStatusCode</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">TemporaryRedirect</span><span class="p">;</span>
<span class="p">});</span>
</pre></table></code></div></div><h2 id="x-permitted-cross-domain-policies"><span class="mr-2">X-Permitted-Cross-Domain-Policies</span><a href="#x-permitted-cross-domain-policies" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>Bu başlık, Adobe ürünlerinin web sayfasını sizinkinden farklı bir etki alanından oluşturmasına izin verilip verilmediğini belirtmek için kullanılabilir. Örnek olarak, web sitenizde Flash kullanıyorsanız, X-Permission-Cross-Domain-Policies başlığını kullanarak istemcilerin siteler arası istekte bulunmasını engelleyebilirsiniz.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">app</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">next</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"X-Permitted-Cross-Domain-Policies"</span><span class="p">,</span><span class="s">"none"</span><span class="p">);</span>
    <span class="k">await</span> <span class="nf">next</span><span class="p">();</span>
<span class="p">});</span>
</pre></table></code></div></div><h2 id="x-xss-protection"><span class="mr-2">X-XSS-Protection</span><a href="#x-xss-protection" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>X-XSS-Protection başlığı, günümüz tarayıcılarının bir siteler arası komut dosyası çalıştırma saldırısı (XSS) algıladıklarında web sayfasını yüklemeyi durdurmasına neden olur.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">app</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">next</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"X-Xss-Protection"</span><span class="p">,</span> <span class="s">"1; mode=block"</span><span class="p">);</span>
    <span class="k">await</span> <span class="nf">next</span><span class="p">();</span>
<span class="p">});</span>
</pre></table></code></div></div><h2 id="x-content-type-options"><span class="mr-2">X-Content-Type-Options</span><a href="#x-content-type-options" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>Tarayıcıların istemciden gönderilen isteklerde Content Type başlığı ile gönderilen MIME türünün kendisinin belirlemesini engellemek için kullanılır.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">app</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">next</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"X-Content-Type-Options"</span><span class="p">,</span> <span class="s">"nosniff"</span><span class="p">);</span>
    <span class="k">await</span> <span class="nf">next</span><span class="p">();</span>
<span class="p">});</span>
</pre></table></code></div></div><h2 id="referrer-policy"><span class="mr-2">Referrer-Policy</span><a href="#referrer-policy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>Bir sitenin farklı bir siteye erişim yaptığında kendi adresinide referrer ile gönderir. Bazı durumlarda kaynak adresin açık şekilde gönderilmesi istenmediğinde Referrer-Policy başlığı kullanılır.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">app</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">next</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Referrer-Policy"</span><span class="p">,</span> <span class="s">"no-referrer"</span><span class="p">);</span>
    <span class="k">await</span> <span class="nf">next</span><span class="p">();</span>
<span class="p">});</span>
</pre></table></code></div></div><h2 id="feature-policy"><span class="mr-2">Feature-Policy</span><a href="#feature-policy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>Uygulamanın kamera, mikrofon, usb vb. gibi gereksinimlere ihtiyaç duyup/duymayacağını belirlediğimiz başlıktır.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">app</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">next</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Permissions-Policy"</span><span class="p">,</span> <span class="s">"camera=(), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), usb=()"</span><span class="p">);</span>
    <span class="k">await</span> <span class="nf">next</span><span class="p">();</span>
<span class="p">});</span>
</pre></table></code></div></div><h2 id="content-security-policy"><span class="mr-2">Content-Security-Policy</span><a href="#content-security-policy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>Content-Security-Policy, bir web sayfasının yüklemesine izin verilen kaynakları kontrol etmek için kullanılan bir güvenlik politikasıdır. Bir HTTP yanıtında Content-Security-Policy başlığı aracılığıyla uygulanan ekstra bir güvenlik katmanını temsil eder. Content-Security-Policy, siteler arası komut dosyası çalıştırma saldırıları ve veri enjeksiyon saldırıları gibi belirli saldırı türlerini tespit etmek ve azaltmak için kullanılır. Özellikle style ve script dosyalarında dolayı oluşabilecek veri enjeksiyon saldırıları için kullanılabilir.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">app</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">next</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">ctx</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Content-Security-Policy"</span><span class="p">,</span>
        <span class="s">"default-src 'self'"</span><span class="p">);</span>
    <span class="k">await</span> <span class="nf">next</span><span class="p">();</span>
<span class="p">});</span>
</pre></table></code></div></div><p>Tüm bu başlıkları içeren örnek bir middleware hazırladım.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="k">namespace</span> <span class="nn">httpsecurityheader</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">CustomSecurityHeader</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">RequestDelegate</span> <span class="n">_next</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">CustomSecurityHeader</span><span class="p">(</span><span class="n">RequestDelegate</span> <span class="n">next</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_next</span> <span class="p">=</span> <span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Invoke</span><span class="p">(</span><span class="n">HttpContext</span> <span class="n">context</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"X-Frame-Options"</span><span class="p">,</span> <span class="s">"DENY"</span><span class="p">);</span>

        <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"X-Permitted-Cross-Domain-Policies"</span><span class="p">,</span> <span class="s">"none"</span><span class="p">);</span>

        <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"X-Xss-Protection"</span><span class="p">,</span> <span class="s">"1; mode=block"</span><span class="p">);</span>

        <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"X-Content-Type-Options"</span><span class="p">,</span> <span class="s">"nosniff"</span><span class="p">);</span>

        <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Referrer-Policy"</span><span class="p">,</span> <span class="s">"no-referrer"</span><span class="p">);</span>

        <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Permissions-Policy"</span><span class="p">,</span> <span class="s">"camera=(), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), usb=()"</span><span class="p">);</span>

        <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Content-Security-Policy"</span><span class="p">,</span>
            <span class="s">"default-src 'self'"</span><span class="p">);</span>

        <span class="k">await</span> <span class="n">_next</span><span class="p">.</span><span class="nf">Invoke</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Bir sonraki makalede görüşmek üzere. Proje dosyalarını <a href="https://github.com/muratsuzen/HttpSecurityHeader"><strong>buradan</strong></a> indirebilirsiniz.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/asp-net-core/'>ASP.NET CORE</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/asp-net-core/" class="post-tag no-text-decoration" >asp.net core</a> <a href="/tags/net-6-0/" class="post-tag no-text-decoration" >net 6.0</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=ASP.NET%20Core%20Http%20Security%20Header%20-%20Murat%20Suzen&url=https%3A%2F%2Fmuratsuzen.github.io%2Fposts%2Faspnet-core-http-security-header%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=ASP.NET%20Core%20Http%20Security%20Header%20-%20Murat%20Suzen&u=https%3A%2F%2Fmuratsuzen.github.io%2Fposts%2Faspnet-core-http-security-header%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fmuratsuzen.github.io%2Fposts%2Faspnet-core-http-security-header%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/asp-net-core/">asp.net core</a> <a class="post-tag" href="/tags/web-api/">web api</a> <a class="post-tag" href="/tags/dotnet/">dotnet</a> <a class="post-tag" href="/tags/net-6-0/">net 6.0</a> <a class="post-tag" href="/tags/csharp/">csharp</a> <a class="post-tag" href="/tags/middleware/">middleware</a> <a class="post-tag" href="/tags/net-9/">.NET 9</a> <a class="post-tag" href="/tags/api-key/">api key</a> <a class="post-tag" href="/tags/aspnet-core/">aspnet core</a> <a class="post-tag" href="/tags/dependency-injection/">dependency injection</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/aspnet-core-redis-cache-kullanimi/"><div class="card-body"> <em class="small" data-ts="1650213180" data-df="ll" > Apr 17, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>ASP.NET Core Distributed Redis Cache Kullanımı</h3><div class="text-muted small"><p> Merhabalar bu makalede ASP.NET Core projesinde Redis ile distributed cache yapısını inceleyeceğiz. Öncelikle Redis hakkında bilgi sahibi olmak isterseniz Redis Nedir? Ne İşe Yarar? Nerelerde Kullan...</p></div></div></a></div><div class="card"> <a href="/posts/repository-pattern-ile-net-6-web-api-uzerinde-multiple-dbcontext-kullanimi/"><div class="card-body"> <em class="small" data-ts="1650213180" data-df="ll" > Apr 17, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Repository Pattern İle .NET 6 Web API Üzerinde Multiple DbContext Kullanımı</h3><div class="text-muted small"><p> Merhabalar bu makalede bir Asp .Net Web API projesinde multiple DbContext kullanımına değineceğim. Senaryoda 2 farklı veritabanına Repository Pattern yardımıyla DbContext değiştirerek bağlantı yapa...</p></div></div></a></div><div class="card"> <a href="/posts/aspnet-core-web-api-middleware-ve-atrribute-ile-apikey-yetkilendirmesi/"><div class="card-body"> <em class="small" data-ts="1650731580" data-df="ll" > Apr 23, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>ASP.NET Core Web API Üzerinde Middleware ve Attribute ile API Key Yetkilendirmesi</h3><div class="text-muted small"><p> Merhabalar, bu makalede ASP.NET Core Web API projesinde API Key yetkilendirmesini middleware ve attribute yapılarıyla inceleyeceğiz. ApiKeyAuthentication isminde bir ASP.NET Core Web API projesi ol...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/aspnet-core-middleware-nedir-nasil-kullanilir/" class="btn btn-outline-primary" prompt="Older"><p>ASP.NET Core Middleware Nedir? Nasıl Kullanılır?</p></a> <a href="/posts/jquery-datatables-kutuphanesinin-net-core-ile-server-side-kullanimi/" class="btn btn-outline-primary" prompt="Newer"><p>JQuery Datatables Kütüphanesinin .NET Core ile Server Side Kullanımı</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "muratsuzen/muratsuzen.github.io", "data-repo-id": "R_kgDOHzYwFw", "data-category": "General", "data-category-id": "DIC_kwDOHzYwF84CQwaD", "data-mapping": "og:title", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "top", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/asp-net-core/">asp.net core</a> <a class="post-tag" href="/tags/web-api/">web api</a> <a class="post-tag" href="/tags/dotnet/">dotnet</a> <a class="post-tag" href="/tags/net-6-0/">net 6.0</a> <a class="post-tag" href="/tags/csharp/">csharp</a> <a class="post-tag" href="/tags/middleware/">middleware</a> <a class="post-tag" href="/tags/net-9/">.NET 9</a> <a class="post-tag" href="/tags/api-key/">api key</a> <a class="post-tag" href="/tags/aspnet-core/">aspnet core</a> <a class="post-tag" href="/tags/dependency-injection/">dependency injection</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/muratsuzen">Murat Suzen</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> (function () { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE ? "dark" : "default"); let config = {theme: expectedTheme}; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function () { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Create mermaid tag */ $("pre").has("code.language-mermaid").each(function () { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<pre class=\"mermaid\">${svgCode}</pre>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); })(); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { /* start/end delimiter pairs for in-line math */ inlineMath: [ ['$', '$'], ['\\(', '\\)'] ], /* start/end delimiter pairs for display math */ displayMath: [ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-B206HX7D04"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-B206HX7D04'); }); </script>
